!function(e){function t(t){for(var a,i,c=t[0],s=t[1],l=t[2],d=0,m=[];d<c.length;d++)i=c[d],r[i]&&m.push(r[i][0]),r[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={1:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;o.push([114,0]),n()}({114:function(e,t,n){n(52),e.exports=n(125)},125:function(e,t){},52:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"giphyImageLoaded",function(){return Ee}),n.d(a,"giphyImageErrored",function(){return be}),n.d(a,"sortGiphies",function(){return ye}),n.d(a,"updateGiphy",function(){return Oe}),n.d(a,"fetchGiphies",function(){return Ne});var r={};n.r(r),n.d(r,"createModalStore",function(){return we}),n.d(r,"deleteModalStore",function(){return Ce}),n.d(r,"openModal",function(){return Re}),n.d(r,"closeModal",function(){return Pe});var o=n(0),i=n.n(o),c=n(51),s=n(50),l=n(10),u=n(48),d=n(4),m=n(47),p=n(119),f=n(44),h=n.n(f),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},v=Object(d.fromJS)({records:[],fetching:!1,error:!1,pagination:{}});function E(e,t,n){var a=e.get("records").toJS().map(function(e){return e.id===t.data.id?g({},e,n):e});return e.set("records",Object(d.fromJS)(a))}var b=Object(p.a)({FETCH_GIPHIES_START:function(e){return e.withMutations(function(e){e.set("fetching",!0).set("error",!1)})},FETCH_GIPHIES_SUCCESS:function(e,t){return e.withMutations(function(e){e.set("records",Object(d.fromJS)(t.data.records)).set("pagination",t.data.pagination).set("fetching",!1).set("error",!1)})},FETCH_GIPHIES_ERROR:function(e){return e.withMutations(function(e){e.set("records",Object(d.fromJS)([])).set("fetching",!1).set("error",!0)})},GIPHY_IMAGE_LOADED:function(e,t){return E(e,t,{loading:!1,loadFailed:!1})},GIPHY_IMAGE_ERRORED:function(e,t){return E(e,t,{loading:!1,loadFailed:!0})},UPDATE_GIPHY:function(e,t){var n=e.get("records").toJS().map(function(e){var n=t.data.giphy;return e.id===n.id?n:e});return e.set("records",Object(d.fromJS)(n))},SORT_GIPHIES:function(e,t){var n=t.data.dir,a=e.get("records").toJS();if("random"===n)return e.set("records",Object(d.fromJS)(h()(a)));var r=a.sort(function(e,t){return"desc"===n?t._score-e._score:e._score-t._score});return e.set("records",Object(d.fromJS)(r))}},v),y=Object(p.a)({CREATE_MODAL_STORE:function(e,t){return e.set(t.data.id,Object(d.fromJS)({}))},DELETE_MODAL_STORE:function(e,t){return e.delete(t.data.id)},OPEN_MODAL:function(e,t){return e.set(t.data.id,Object(d.fromJS)({isOpen:!0}))},CLOSE_MODAL:function(e,t){return e.set(t.data.id,Object(d.fromJS)({isOpen:!1}))}},Object(d.fromJS)({})),O=Object(m.combineReducers)({modals:y,giphies:b}),N=window.devToolsExtension||function(){return function(e){return e}};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[Object(l.a)(u.a),N()];return Object(l.d)(O,Object(d.fromJS)(e),l.c.apply(void 0,t))}(),S=n(1),j=n.n(S),k=n(13),w=n(116),C=n(115),R=n(117),P=n(118),T=function(e){return i.a.createElement("div",null,i.a.createElement("header",{className:"header"},i.a.createElement("nav",{className:"navbar navbar-light bg-light"},i.a.createElement("span",{className:"navbar-brand mb-0 h1"},"Giphies"))),i.a.createElement("div",{className:"container"},e.children))};T.propTypes={children:j.a.node.isRequired};var G=T,I=n(42),M=n.n(I),x=n(7),D=n.n(x),L=n(8),H=n(41),A=n.n(H),J=n(40),q=n.n(J);function F(e,t,n){return t<=e.max&&t>=e.min&&t<=n&&t>0}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0,0[.]00";return q()(e).format(t)}var Y=n(39),V=n.n(Y),W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},z=function(e){return i.a.createElement("div",{className:"loader"},i.a.createElement(L.a,W({},e,{icon:V.a,color:e.color,spin:!0})))};z.propTypes={color:j.a.string,size:j.a.string},z.defaultProps={color:"",size:"2x"};var B=z,Z=n(38),K=n.n(Z),Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var X=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.close=e.close.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),Q(t,[{key:"componentWillMount",value:function(){this.props.actions.createModalStore(this.props.id)}},{key:"componentWillUnmount",value:function(){this.props.actions.deleteModalStore(this.props.id)}},{key:"close",value:function(){return this.props.actions.closeModal(this.props.id)}},{key:"render",value:function(){var e=this.props.modals[this.props.id];return e?i.a.createElement("div",{className:D()("modal",{"is-open":e.isOpen})},i.a.createElement("div",{className:"modal__container"},i.a.createElement("div",{className:"modal__close"},i.a.createElement(L.a,{icon:K.a,onClick:this.close})),i.a.createElement("div",{className:D()("modal__content",this.props.className)},this.props.title&&i.a.createElement("h3",{className:"modal__title"},this.props.title),this.props.children)),i.a.createElement("div",{className:"modal__backdrop",onClick:this.close})):null}}]),t}();X.propTypes={id:j.a.string.isRequired,actions:j.a.objectOf(j.a.func).isRequired,children:j.a.node,className:j.a.string,title:j.a.string,modals:j.a.objectOf(j.a.object).isRequired},X.defaultProps={children:null,className:"",title:void 0};var $=X,ee=n(37),te=n.n(ee),ne=n(36),ae=n.n(ne),re=function(e){return i.a.createElement("div",{className:D()("rank-controls",e.className)},i.a.createElement(L.a,{icon:te.a,className:"rank-controls__up mr-3",onClick:function(){return e.onUpvote()}}),i.a.createElement("span",{className:"badge badge-pill badge-secondary"},e.score),i.a.createElement(L.a,{icon:ae.a,className:"rank-controls__down ml-3",onClick:function(){return e.onDownvote()}}))};re.propTypes={className:j.a.string,onUpvote:j.a.func.isRequired,onDownvote:j.a.func.isRequired,score:j.a.oneOfType([j.a.string,j.a.number]).isRequired},re.defaultProps={className:""};var oe=re,ie=function(e){var t=e.current,n=e.pages,a=function(e,t,n){return e<=1+t?{min:1,max:Math.min(1+2*t,n)}:e>=n-t?{min:Math.max(n-2*t,1),max:n}:{min:e-t,max:Math.min(e+t,n)}}(t,e.spread,n),r=function(){return 1!==t&&1!==a.min},o=function(){return 1!==t},c=function(){return t<n},s=function(){return t!==n&&a.max!==n};return i.a.createElement("nav",{className:D()("d-flex justify-content-center",e.className)},i.a.createElement("div",{className:"pagination"},i.a.createElement("div",{className:D()("page-item",{"disabled no-pointer-events":!o()}),onClick:function(){e.onChange(t-1)}},i.a.createElement("span",{className:"page-link"},"Prev")),r()?i.a.createElement("div",{className:"page-item",onClick:function(){e.onChange(1)}},i.a.createElement("span",{className:"page-link"},1)):null,r()?i.a.createElement("div",{className:"page-item disabled"},i.a.createElement("span",{className:"page-link"},"...")):null,function(){for(var r=[],o=function(n){r.push(i.a.createElement("div",{className:D()("page-item",{active:n===t}),key:n,onClick:function(){e.onChange(n)}},i.a.createElement("span",{className:"page-link"},n)))},c=a.min;F(a,c,n);c+=1)o(c);return r.length>1?r:null}(),s()?i.a.createElement("div",{className:"page-item disabled"},i.a.createElement("span",{className:"page-link"},"...")):null,s()?i.a.createElement("div",{className:"page-item",onClick:function(){e.onChange(n)}},i.a.createElement("span",{className:"page-link"},n)):null,i.a.createElement("div",{className:D()("page-item",{"disabled no-pointer-events":!c()}),onClick:function(){e.onChange(t+1)}},i.a.createElement("span",{className:"page-link"},"Next"))))};ie.propTypes={current:j.a.number.isRequired,onChange:j.a.func,pages:j.a.number.isRequired,spread:j.a.number,className:j.a.string},ie.defaultProps={spread:4,onChange:function(){},className:""};var ce=ie,se=n(35),le=n.n(se),ue="FETCH_GIPHIES_START",de="FETCH_GIPHIES_SUCCESS",me="FETCH_GIPHIES_ERROR",pe="UPDATE_GIPHY",fe="SORT_GIPHIES",he="GIPHY_IMAGE_LOADED",ge="GIPHY_IMAGE_ERRORED",ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function Ee(e){return{type:he,data:{id:e}}}function be(e){return{type:ge,data:{id:e}}}function ye(e){return{type:fe,data:{dir:e}}}function Oe(e){return{type:pe,data:{giphy:e}}}function Ne(e){return function(t){t({type:ue});var n="https://api.giphy.com/v1/gifs/search?api_key=OEAB06E9ZunkcYT16T8WMuK0CWEl2ZuI&"+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=Object.keys(e),a=n.length-1;return n.forEach(function(n,r){t+=n+"="+e[n]+(a!==r?"&":"")}),t}(e);return le.a.get(n).then(function(n){var a=n.data,r=a.data,o=a.pagination;return t({type:de,data:{records:r.map(function(e){var t,n=(t=e.id,JSON.parse(localStorage.getItem(t)));return ve({},n||e,{loading:!0})}),pagination:ve({},o,{pages:Math.ceil(o.total_count/e.limit),current:e.offset/e.limit+1})}}),n.data},function(e){return t({type:me}),e})}}var _e="CREATE_MODAL_STORE",Se="DELETE_MODAL_STORE",je="OPEN_MODAL",ke="CLOSE_MODAL";function we(e){return{type:_e,data:{id:e}}}function Ce(e){return{type:Se,data:{id:e}}}function Re(e){return{type:je,data:{id:e}}}function Pe(e){return{type:ke,data:{id:e}}}var Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Ie=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.modalId="giphy-details",e.searchNode=null,e.pageLimitOptions=[10,25,50],e.sortingOptions=["asc","desc","random"],e.state={pageLimit:25,searchVal:"",focusedGiphy:null,sortDirection:null},e.handleSearch=e.handleSearch.bind(e),e.handleRanking=e.handleRanking.bind(e),e.renderGiphyCards=e.renderGiphyCards.bind(e),e.renderHeaderControls=e.renderHeaderControls.bind(e),e.renderGiphyDetailsModal=e.renderGiphyDetailsModal.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.a.Component),Ge(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.focusedGiphy;if(t){var n=e.giphies.records,a=this.props.giphies.records,r=n.find(function(e){return e.id===t.id}),o=a.find(function(e){return e.id===t.id});M()(o,r)||this.setState(function(){return{focusedGiphy:r}})}}},{key:"handleSearch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.props.actions,r=this.searchNode.value,o=this.state,i=o.sortDirection,c=o.pageLimit,s=o.searchVal,l=n?s:r;if(l){var u={q:l,limit:c,offset:t};return a.fetchGiphies(u).then(function(t){return e.setState(function(){return{searchVal:l}}),t.data&&i&&a.sortGiphies(i)})}}},{key:"handleRanking",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!e.upvoted&&!e.downvoted,a=e.upvoted&&t,r=e.upvoted&&!t,o=e.downvoted&&!t,i=e.downvoted&&t,c=void 0,s=void 0,l=e._score;a||r?(l-=1,s=!e.upvoted,c=r):o||i?(l+=1,c=!e.downvoted,s=i):n&&t?(l+=1,s=!0,c=!!c):n&&!t&&(l-=1,c=!0,s=!!s);var u,d,m=Te({},e,{_score:l,upvoted:s,downvoted:c});this.props.actions.updateGiphy(m),u=m.id,d=m,localStorage.setItem(u,JSON.stringify(d))}},{key:"renderGiphyDetailsModal",value:function(){var e=this,t=this.props,n=t.modals,a=t.actions,r=this.state.focusedGiphy;return i.a.createElement($,{id:this.modalId,actions:a,modals:n},r&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-6 col-md-5"},i.a.createElement("img",{className:"card-img h-75",alt:r.title,src:r.images.downsized_medium.url}),i.a.createElement(oe,{score:U(r._score),onUpvote:function(){return e.handleRanking(r)},onDownvote:function(){return e.handleRanking(r,!1)},className:"mt-3"})),i.a.createElement("div",{className:"col-sm-6 col-md-7"},i.a.createElement("ul",{className:"list-group"},r.title&&i.a.createElement("li",{className:"list-group-item d-flex"},i.a.createElement("strong",{className:"mr-1"},"Title:"),i.a.createElement("span",{title:r.title,className:"text-capitalize text-truncate"},r.title)),r.username&&i.a.createElement("li",{className:"list-group-item d-flex"},i.a.createElement("strong",{className:"mr-1"},"Username:"),i.a.createElement("span",null,r.username)),i.a.createElement("li",{className:"list-group-item d-flex"},i.a.createElement("strong",{className:"mr-1"},"Rating:"),i.a.createElement("span",{className:"text-uppercase"},r.rating)),i.a.createElement("li",{className:"list-group-item d-flex"},i.a.createElement("strong",{className:"mr-1"},"Embed:"),i.a.createElement("a",{href:r.embed_url,title:r.embed_url,target:"_blank",className:"text-truncate"},r.embed_url)),r.source&&i.a.createElement("li",{className:"list-group-item d-flex"},i.a.createElement("strong",{className:"mr-1"},"Source:"),i.a.createElement("a",{href:r.source,title:r.source,target:"_blank",className:"text-truncate"},r.source)),i.a.createElement("li",{className:"list-group-item d-flex"},i.a.createElement("strong",{className:"mr-1"},"Score:"),i.a.createElement("span",null,U(r._score)))))))}},{key:"renderHeaderControls",value:function(){var e=this;return i.a.createElement("form",{id:"header-control-form",className:"form-row",onSubmit:function(t){t.preventDefault(),e.handleSearch()}},i.a.createElement("div",{className:"form-group col-lg-4 col-sm-6 col-md-5 mb-0 mr-auto"},i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{id:"search-input",type:"text",ref:function(t){e.searchNode=t},placeholder:"Search...",className:"form-control form-control-sm"}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{id:"search-btn",type:"submit",className:"btn btn-outline-secondary"},i.a.createElement(L.a,{icon:A.a}))))),i.a.createElement("div",{className:"form-group col-lg-2 col-sm-3 justify-content-end d-flex mb-0"},i.a.createElement("label",{id:"page-limit-label",htmlFor:"page-limit-select",className:"mr-3 d-none d-sm-block text-muted"},"Limit"),i.a.createElement("select",{id:"page-limit-select",className:"form-control form-control-sm",defaultValue:this.state.pageLimit,onChange:function(t){var n=t.target.value,a=(e.props.giphies.pagination.current-1)*e.state.pageLimit;e.setState(function(){return{pageLimit:n}},function(){return e.handleSearch(a,!0)})}},this.pageLimitOptions.map(function(e){return i.a.createElement("option",{key:e},e)}))),i.a.createElement("div",{className:"form-group col-lg-1 col-sm-2 mb-0"},i.a.createElement("select",{id:"sort-select",className:"form-control form-control-sm",defaultValue:"Order",onChange:function(t){var n=t.target.value;e.setState(function(){return{sortDirection:n}},function(){return e.props.actions.sortGiphies(n)})}},i.a.createElement("option",{disabled:!0},"Order"),this.sortingOptions.map(function(e){return i.a.createElement("option",{key:e},e)}))))}},{key:"renderGiphyCards",value:function(){var e=this,t=this.props,n=t.giphies,a=t.actions,r=n.records,o=n.fetching,c=n.error,s=n.pagination,l=s.pages,u=s.current;return i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"position-relative"},o&&i.a.createElement(B,null),i.a.createElement("div",{className:"row"},r.map(function(t){return i.a.createElement("div",{key:t.id,className:"col-sm-6 col-md-4 col-lg-3 mt-3"},i.a.createElement("div",{id:"giphy-"+t.id,className:"card"},t.loading&&i.a.createElement("div",{className:"placeholder-shimmer rounded-top"}),i.a.createElement("div",{className:"card__img",onClick:function(){a.openModal(e.modalId),e.setState(function(){return{focusedGiphy:t}})}},i.a.createElement("img",{className:D()("object-fit-cover cursor-pointer rounded-top",{"d-none":t.loading||t.loadFailed}),src:t.images.fixed_height_downsampled.url,alt:t.title,onLoad:function(){return a.giphyImageLoaded(t.id)},onError:function(){return a.giphyImageErrored(t.id)}})),i.a.createElement("div",{className:"card-body card-body--rank-wrapper"},i.a.createElement(oe,{score:U(t._score),onUpvote:function(){return e.handleRanking(t)},onDownvote:function(){return e.handleRanking(t,!1)}}))))}),(c||!r.length)&&i.a.createElement("div",{id:c?"network-error":"no-giphies",className:"col d-flex justify-content-center text-muted"},i.a.createElement("h5",{className:"font-weight-light"},c?"Network Error":"No Giphies to display"))),!!r.length&&i.a.createElement(ce,{current:u,pages:l,className:"mt-5",onChange:function(t){var n=(t-1)*e.state.pageLimit;e.handleSearch(n,!0)}})))}},{key:"render",value:function(){return i.a.createElement("section",{className:"card card--emboss mt-5"},i.a.createElement("div",{className:"card-header"},this.renderHeaderControls()),this.renderGiphyCards(),this.renderGiphyDetailsModal())}}]),t}();Ie.propTypes={actions:j.a.objectOf(j.a.func).isRequired,modals:j.a.objectOf(j.a.object).isRequired,giphies:j.a.shape({records:j.a.array,error:j.a.bool,fetching:j.a.bool,pagination:j.a.object}).isRequired};var Me=Object(k.b)(function(e){return{modals:e.get("modals").toJS(),giphies:e.get("giphies").toJS()}},function(e){return{actions:Object(l.b)(Te({},a,r),e)}})(Ie),xe=function(){return i.a.createElement(R.a,null,i.a.createElement(w.a,null,i.a.createElement(C.a,{exact:!0,path:"/",render:function(e){return i.a.createElement(G,null,i.a.createElement(Me,e))}}),i.a.createElement(P.a,{to:"/"})))},De=function(e){return i.a.createElement(k.a,{store:e.store},i.a.createElement(xe,null))};De.propTypes={store:j.a.objectOf(j.a.oneOfType([j.a.func,j.a.object])).isRequired};var Le,He=De,Ae=document.getElementById("app");Le=He,Object(c.render)(i.a.createElement(s.AppContainer,null,i.a.createElement(Le,{store:_})),Ae)}});